<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="August 2023, UC Berkeley">

<title>data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-179469d940bc53b7d989303f68e0e62a.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../assets/styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../units/intro.html">Modules</a></li><li class="breadcrumb-item"><a href="../units/data.html">Data Structures</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Voleon R Bootcamp</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/paciorek/r-voleon-2025" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home / Schedule</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preparation</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Modules</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basic Introduction (Module “0”)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/data.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data Structures</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/calculation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Calculation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/programming.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Programming</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/tidyverse.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tidyverse</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/ggplot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Plotting (ggplot)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/analysis" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Analysis/Packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../units/topics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Additional Topics</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#a-few-administrative-things" id="toc-a-few-administrative-things" class="nav-link active" data-scroll-target="#a-few-administrative-things">A few administrative things</a>
  <ul class="collapse">
  <li><a href="#where-to-find-stuff" id="toc-where-to-find-stuff" class="nav-link" data-scroll-target="#where-to-find-stuff">Where to find stuff</a></li>
  <li><a href="#wireless" id="toc-wireless" class="nav-link" data-scroll-target="#wireless">Wireless</a></li>
  </ul></li>
  <li><a href="#how-well-operate" id="toc-how-well-operate" class="nav-link" data-scroll-target="#how-well-operate">How we’ll operate</a></li>
  <li><a href="#getting-help" id="toc-getting-help" class="nav-link" data-scroll-target="#getting-help">Getting help</a></li>
  <li><a href="#suggestions-on-how-to-get-the-most-out-of-the-bootcamp" id="toc-suggestions-on-how-to-get-the-most-out-of-the-bootcamp" class="nav-link" data-scroll-target="#suggestions-on-how-to-get-the-most-out-of-the-bootcamp">Suggestions on how to get the most out of the bootcamp</a></li>
  <li><a href="#rstudio-and-r-markdown" id="toc-rstudio-and-r-markdown" class="nav-link" data-scroll-target="#rstudio-and-r-markdown">RStudio and R Markdown</a></li>
  <li><a href="#using-github-to-get-the-documents" id="toc-using-github-to-get-the-documents" class="nav-link" data-scroll-target="#using-github-to-get-the-documents">Using GitHub to get the documents</a>
  <ul class="collapse">
  <li><a href="#within-rstudio" id="toc-within-rstudio" class="nav-link" data-scroll-target="#within-rstudio">Within RStudio</a></li>
  <li><a href="#from-a-maclinux-terminal-window" id="toc-from-a-maclinux-terminal-window" class="nav-link" data-scroll-target="#from-a-maclinux-terminal-window">From a Mac/Linux terminal window</a></li>
  <li><a href="#as-a-zip-file" id="toc-as-a-zip-file" class="nav-link" data-scroll-target="#as-a-zip-file">As a zip file</a></li>
  </ul></li>
  <li><a href="#what-is-r" id="toc-what-is-r" class="nav-link" data-scroll-target="#what-is-r">What is R?</a></li>
  <li><a href="#modes-of-using-r" id="toc-modes-of-using-r" class="nav-link" data-scroll-target="#modes-of-using-r">Modes of using R</a></li>
  <li><a href="#starting-r-and-rstudio" id="toc-starting-r-and-rstudio" class="nav-link" data-scroll-target="#starting-r-and-rstudio">Starting R and RStudio</a></li>
  <li><a href="#why-r" id="toc-why-r" class="nav-link" data-scroll-target="#why-r">Why R?</a></li>
  <li><a href="#why-not-r" id="toc-why-not-r" class="nav-link" data-scroll-target="#why-not-r">Why Not R?</a></li>
  <li><a href="#what-are-my-other-options" id="toc-what-are-my-other-options" class="nav-link" data-scroll-target="#what-are-my-other-options">What are my other options?</a></li>
  <li><a href="#my-hidden-agenda" id="toc-my-hidden-agenda" class="nav-link" data-scroll-target="#my-hidden-agenda">My hidden agenda</a></li>
  <li><a href="#the-legal-stuff" id="toc-the-legal-stuff" class="nav-link" data-scroll-target="#the-legal-stuff">The Legal Stuff</a></li>
  <li><a href="#thanks" id="toc-thanks" class="nav-link" data-scroll-target="#thanks">Thanks!</a></li>
  <li><a href="#we-want-your-feedback-even-if-you-leave-early" id="toc-we-want-your-feedback-even-if-you-leave-early" class="nav-link" data-scroll-target="#we-want-your-feedback-even-if-you-leave-early">We want your feedback (even if you leave early)!</a></li>
  <li><a href="#lists" id="toc-lists" class="nav-link" data-scroll-target="#lists">Lists</a></li>
  <li><a href="#lists-quick-quiz" id="toc-lists-quick-quiz" class="nav-link" data-scroll-target="#lists-quick-quiz">Lists: quick quiz</a></li>
  <li><a href="#data-frames" id="toc-data-frames" class="nav-link" data-scroll-target="#data-frames">Data frames</a></li>
  <li><a href="#data-frames-are-special-lists" id="toc-data-frames-are-special-lists" class="nav-link" data-scroll-target="#data-frames-are-special-lists">Data frames are (special) lists!</a></li>
  <li><a href="#but-lists-are-also-vectors" id="toc-but-lists-are-also-vectors" class="nav-link" data-scroll-target="#but-lists-are-also-vectors">But lists are also vectors!</a></li>
  <li><a href="#matrices" id="toc-matrices" class="nav-link" data-scroll-target="#matrices">Matrices</a></li>
  <li><a href="#matrices-quick-quiz" id="toc-matrices-quick-quiz" class="nav-link" data-scroll-target="#matrices-quick-quiz">Matrices: quick quiz</a></li>
  <li><a href="#arrays" id="toc-arrays" class="nav-link" data-scroll-target="#arrays">Arrays</a></li>
  <li><a href="#attributes" id="toc-attributes" class="nav-link" data-scroll-target="#attributes">Attributes</a></li>
  <li><a href="#attributes-quick-quiz" id="toc-attributes-quick-quiz" class="nav-link" data-scroll-target="#attributes-quick-quiz">Attributes: quick quiz</a></li>
  <li><a href="#matrices-are-stored-column-major" id="toc-matrices-are-stored-column-major" class="nav-link" data-scroll-target="#matrices-are-stored-column-major">Matrices are stored column-major</a></li>
  <li><a href="#missing-values-and-other-special-values" id="toc-missing-values-and-other-special-values" class="nav-link" data-scroll-target="#missing-values-and-other-special-values">Missing values and other special values</a>
  <ul class="collapse">
  <li><a href="#na-is-a-missing-value" id="toc-na-is-a-missing-value" class="nav-link" data-scroll-target="#na-is-a-missing-value"><code>NA</code> is a missing value</a></li>
  <li><a href="#to-infinity-and-beyond" id="toc-to-infinity-and-beyond" class="nav-link" data-scroll-target="#to-infinity-and-beyond">To infinity and beyond</a></li>
  <li><a href="#nan-stands-for-not-a-number" id="toc-nan-stands-for-not-a-number" class="nav-link" data-scroll-target="#nan-stands-for-not-a-number"><code>NaN</code> stands for Not a Number</a></li>
  <li><a href="#null" id="toc-null" class="nav-link" data-scroll-target="#null"><code>NULL</code></a></li>
  </ul></li>
  <li><a href="#missing-values-quick-quiz" id="toc-missing-values-quick-quiz" class="nav-link" data-scroll-target="#missing-values-quick-quiz">Missing values: quick quiz</a></li>
  <li><a href="#logical-vectors-and-boolean-arithmetic" id="toc-logical-vectors-and-boolean-arithmetic" class="nav-link" data-scroll-target="#logical-vectors-and-boolean-arithmetic">Logical vectors and boolean arithmetic</a></li>
  <li><a href="#converting-between-different-types-of-objects" id="toc-converting-between-different-types-of-objects" class="nav-link" data-scroll-target="#converting-between-different-types-of-objects">Converting between different types of objects</a></li>
  <li><a href="#converting-between-different-types-quick-quiz" id="toc-converting-between-different-types-quick-quiz" class="nav-link" data-scroll-target="#converting-between-different-types-quick-quiz">Converting between different types: quick quiz</a></li>
  <li><a href="#factors" id="toc-factors" class="nav-link" data-scroll-target="#factors">Factors</a></li>
  <li><a href="#advanced-ordering-the-factor-optional" id="toc-advanced-ordering-the-factor-optional" class="nav-link" data-scroll-target="#advanced-ordering-the-factor-optional">(Advanced) Ordering the Factor (optional)</a></li>
  <li><a href="#advanced-reclassifying-factors" id="toc-advanced-reclassifying-factors" class="nav-link" data-scroll-target="#advanced-reclassifying-factors">(Advanced) Reclassifying Factors</a></li>
  <li><a href="#strings" id="toc-strings" class="nav-link" data-scroll-target="#strings">Strings</a></li>
  <li><a href="#regular-expressions-regex-or-regexp-optional" id="toc-regular-expressions-regex-or-regexp-optional" class="nav-link" data-scroll-target="#regular-expressions-regex-or-regexp-optional">Regular expressions (regex or regexp) (optional)</a></li>
  <li><a href="#subsetting" id="toc-subsetting" class="nav-link" data-scroll-target="#subsetting">Subsetting</a>
  <ul class="collapse">
  <li><a href="#by-direct-indexing" id="toc-by-direct-indexing" class="nav-link" data-scroll-target="#by-direct-indexing">1) by direct indexing</a></li>
  <li><a href="#by-a-vector-of-logicals" id="toc-by-a-vector-of-logicals" class="nav-link" data-scroll-target="#by-a-vector-of-logicals">2) by a vector of logicals</a></li>
  <li><a href="#by-a-vector-of-names" id="toc-by-a-vector-of-names" class="nav-link" data-scroll-target="#by-a-vector-of-names">3) by a vector of names</a></li>
  <li><a href="#using-subset" id="toc-using-subset" class="nav-link" data-scroll-target="#using-subset">4) using <em>subset()</em></a></li>
  <li><a href="#using-dplyr-tools-such-as-filter-and-select-more-in-module-6" id="toc-using-dplyr-tools-such-as-filter-and-select-more-in-module-6" class="nav-link" data-scroll-target="#using-dplyr-tools-such-as-filter-and-select-more-in-module-6">5) using <em>dplyr</em> tools such as <em>filter()</em> and <em>select()</em> – more in Module 6</a></li>
  </ul></li>
  <li><a href="#assignment-into-subsets" id="toc-assignment-into-subsets" class="nav-link" data-scroll-target="#assignment-into-subsets">Assignment into subsets</a></li>
  <li><a href="#subsetting-quick-quiz" id="toc-subsetting-quick-quiz" class="nav-link" data-scroll-target="#subsetting-quick-quiz">Subsetting: quick quiz</a></li>
  <li><a href="#breakout" id="toc-breakout" class="nav-link" data-scroll-target="#breakout">Breakout</a>
  <ul class="collapse">
  <li><a href="#basics" id="toc-basics" class="nav-link" data-scroll-target="#basics">Basics</a></li>
  <li><a href="#using-the-ideas" id="toc-using-the-ideas" class="nav-link" data-scroll-target="#using-the-ideas">Using the ideas</a></li>
  <li><a href="#advanced" id="toc-advanced" class="nav-link" data-scroll-target="#advanced">Advanced</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../units/intro.html">Modules</a></li><li class="breadcrumb-item"><a href="../units/data.html">Data Structures</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">R bootcamp, Module 0: Recruit processing</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Chris Paciorek</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>TODO: add class(), typeof() from module 1</p>
<section id="a-few-administrative-things" class="level1">
<h1>A few administrative things</h1>
<section id="where-to-find-stuff" class="level2">
<h2 class="anchored" data-anchor-id="where-to-find-stuff">Where to find stuff</h2>
<p>This <a href="https://berkeley-scf.github.io/r-bootcamp-fall-2023">website</a> and the associated GitHub site (<a href="https://github.com/berkeley-scf/r-bootcamp-fall-2023">https://github.com/berkeley-scf/r-bootcamp-fall-2023</a>) is the main site for the bootcamp. It has information on logistics, software installation, and is the master repository for materials for the modules.</p>
<p>We have an <a href="https://edstem.org/us/courses/42488">Ed Discussion site</a> for discussion and answering questions online during (and before) the bootcamp.</p>
<p>If you have an administrative question before or after the bootcamp, email r-bootcamp@lists.berkeley.edu.</p>
</section>
<section id="wireless" class="level2">
<h2 class="anchored" data-anchor-id="wireless">Wireless</h2>
<p>The campus WiFi is now eduroam, not AirBears. Follow <a href="https://berkeley.service-now.com/kb_view.do?sysparm_article=KB0013807">these instructions</a> for how to set up your eduroam account. If you need wireless access as a guest (i.e., you don’t have a CalNet ID), connect to ‘CalVisitor’.</p>
</section>
</section>
<section id="how-well-operate" class="level1">
<h1>How we’ll operate</h1>
<p>The bootcamp will be organized in modules, each of which will be a combination of lecture/demo presentation concluded by a breakout session in which you’ll work on a variety of problems of different levels of difficulty. The idea is for each person to find problems that challenge them but are not too hard. Solutions to the breakout problems will be presented before the start of the next module.</p>
<p>Many of the modules will use a common dataset as an example on which to carry out various operations. We’ll focus on dataset of demographic/economic information (population, GDP per capita, life expectancy) for many of the countries in the world every five years, provided by the <a href="https://www.gapminder.org">Gapminder project</a>. (Note that this is almost the full population of countries – I’ll fit some statistical models but the interpretation is tricky as we are not working with a sample from a well-defined population.)</p>
</section>
<section id="getting-help" class="level1">
<h1>Getting help</h1>
<ul>
<li>Counselors will be available to help answer any questions you have (just wave to one of them).</li>
<li>Or feel free to just ask the presenter during the presentation.</li>
<li>The counselors will also be monitoring the Ed Discussion site, so feel free to type in a question there and one of the counselors will answer the question. Or if you know the answer, help us out by answering it yourself or adding your thoughts.</li>
</ul>
<p>Your counseloRs are: Kenneth Chen (Statistics), Florica Constantine (Statistics), Will Torous (Statistics), and Austin Zane (Statistics).</p>
</section>
<section id="suggestions-on-how-to-get-the-most-out-of-the-bootcamp" class="level1">
<h1>Suggestions on how to get the most out of the bootcamp</h1>
<p>I encourage you to:</p>
<ul>
<li>try out the code as we walk through it</li>
<li>keep your eyes open! – We’ll illustrate a lot of syntax and concepts by example</li>
<li>try to guess what the syntax means in cases we haven’t yet seen that syntax</li>
<li>play with it and try variations and try to break it and see what happens</li>
<li>tell us if something interesting happens as you experiment, or post a comment in the chat room</li>
<li>ask questions of me, the counselors, and on the Ed Discussion forum.</li>
</ul>
<p>This is a bootcamp. So there may be some pain involved! If you find yourself not following everything, that’s ok. You may miss some details, but try to follow the basics and the big picture.</p>
<p>A few additional thoughts on my pedagogical philosophy here:</p>
<ul>
<li>I want to expose you to a lot of tools and ideas that you can come back to when you need them and when you have time for more depth.</li>
<li>My aim is not to show you how to use specific statistical methods or analysis techniques. My goal is to get you up to speed generally in R.</li>
<li>It can be hard to absorb everything in such a concentrated situation. Hopefully the material presented will be useful to you over the longer-term as you do more work with R.</li>
</ul>
</section>
<section id="rstudio-and-r-markdown" class="level1">
<h1>RStudio and R Markdown</h1>
<p>We’ll present most of the material from within RStudio, using R Markdown documents with embedded R code. R Markdown is an extension to the Markdown markup language that makes it easy to write HTML in a simple plain text format. This allows us to both run the R code directly as well as compile on-the-fly to an HTML file that can be used for presentation. All files will be available on <a href="https://github.com/berkeley-scf/r-bootcamp-fall-2023">GitHub</a>.</p>
<p>Note: The files named <em>moduleX_blah.html</em> have individual slides, while the files named <em>moduleX_blah_onepage.html</em> have the same content but all on one page.</p>
<p>Warning: in some cases the processing of the R code in the R Markdown is screwy and the slides have error messages that do not occur if you just run the code directly in R or RStudio.</p>
</section>
<section id="using-github-to-get-the-documents" class="level1">
<h1>Using GitHub to get the documents</h1>
<p>To download the files from GitHub, you can do the following.</p>
<section id="within-rstudio" class="level2">
<h2 class="anchored" data-anchor-id="within-rstudio">Within RStudio</h2>
<p>Within RStudio go to File-&gt;New Project-&gt;Version Control-&gt;Git and enter:</p>
<ul>
<li>“Repository URL”: https://github.com/berkeley-scf/r-bootcamp-fall-2023</li>
<li>“Project Directory Name”: r-bootcamp-fall-2023 (or something else of your choosing)</li>
<li>“Directory”: ~/Desktop (or somewhere of your choosing)</li>
</ul>
<p>Then to update from the repository to get any changes we’ve made, you can select (from within RStudio): Tools-&gt;Version Control-&gt;Pull Branches</p>
<p>or from the Environment/History/Git window, click on the Git tab and then on the blue down arrow.</p>
<p>Be warned that you probably do not want to make your own notes or changes to the files we are providing. Because if you do, and you then do a “Git Pull” to update the materials, you’ll have to deal with the conflict between your local version and our version. You probably will want to make a personal copy of such files in another directory or by making copies of files with new names.</p>
</section>
<section id="from-a-maclinux-terminal-window" class="level2">
<h2 class="anchored" data-anchor-id="from-a-maclinux-terminal-window">From a Mac/Linux terminal window</h2>
<p>Run the following commands:</p>
<ul>
<li><code>cd /directory/where/you/want/repository/located</code></li>
<li><code>git clone https://github.com/berkeley-scf/r-bootcamp-fall-2023</code></li>
</ul>
<p>Then to update from the repository to get any changes we’ve made:</p>
<ul>
<li><code>cd /directory/where/you/put/the/repository/r-bootcamp-fall-2023</code></li>
<li><code>git pull</code></li>
</ul>
</section>
<section id="as-a-zip-file" class="level2">
<h2 class="anchored" data-anchor-id="as-a-zip-file">As a zip file</h2>
<p>If you don’t want to bother using Git or have problems, simply download a zip file with all the material from <a href="https://github.com/berkeley-scf/r-bootcamp-fall-2023/archive/refs/heads/gh-pages.zip">GitHub</a></p>
</section>
</section>
<section id="what-is-r" class="level1">
<h1>What is R?</h1>
<ul>
<li>R is an Open Source (and freely available) environment for statistical computing and graphics</li>
<li>It is a full-featured programming language, in particular a scripting language (with similarities to Matlab and Python)</li>
<li>It can be run interactively or as a batch/background job</li>
<li>R is being actively developed with ongoing updates/new releases</li>
<li>R has a variety of built-in as well as community-provided packages that extend its functionality with code and data; see <a href="https://cran.r-project.org/web/packages/index.html">CRAN</a> for the thousands of add-on packages</li>
<li>It is freely-available and modifiable</li>
<li>Available for Windows, Mac OS X, and <a href="http://dilbert.com/strips/comic/1995-06-24/">Linux</a></li>
</ul>
</section>
<section id="modes-of-using-r" class="level1">
<h1>Modes of using R</h1>
<ul>
<li>Using the RStudio GUI, an ‘integrated development environment’</li>
<li>From the command line in a Linux/Mac terminal window</li>
<li>Running an R script in the background on a Linux/Mac machine (Windows?)</li>
<li>Using the Windows/Mac GUIs</li>
</ul>
</section>
<section id="starting-r-and-rstudio" class="level1">
<h1>Starting R and RStudio</h1>
<p>The pieces of an R session include:</p>
<ul>
<li>The R console</li>
<li>Scripts containing your code
<ul>
<li>The script window also has Notebook capabilities like Jupyter notebooks</li>
</ul></li>
<li>Help files</li>
<li>Graphics windows</li>
<li>Workspace containing your objects, which hold data and information</li>
</ul>
<p>RStudio provides an integrated development environment in which all of these pieces are in a single application and tightly integrated, with a built-in editor for your code/scripts.</p>
</section>
<section id="why-r" class="level1">
<h1>Why R?</h1>
<ul>
<li>R is widely used (statisticians, data scientists, scientists, social scientists) and has the widest statistical functionality of any software, and extensive machine learning functionality.</li>
<li>Users add functionality via packages all the time</li>
<li>R is free and available on all major platforms</li>
<li>As a scripting language, R is very powerful, flexible, and easy to use</li>
<li>As a scripting language, R allows for reproducibility and automating tasks</li>
<li>As a language, R can do essentially anything</li>
<li>Wide usage helps to improve quality and reduce bugs</li>
<li>R can interact with other software, databases, the operating system, the web, etc.</li>
<li>R is built on C and can call user-written and external C code and packages (in particular, see the <em>Rcpp</em> R package)</li>
</ul>
</section>
<section id="why-not-r" class="level1">
<h1>Why Not R?</h1>
<ul>
<li><p>Other software is better than R at various tasks</p>
<ul>
<li>E.g., <a href="http://imgs.xkcd.com/comics/python.png">Python</a> is very good for text manipulation, interacting with the operating system, and as a glue for tying together various applications/software in a workflow</li>
<li>And of course Python is the lingua franca for deep learning via Tensorflow and PyTorch.</li>
</ul></li>
<li><p>R can be much slower than compiled languages (but is often quite fast with good coding practices!)</p></li>
<li><p>R’s packages are only as good as the person who wrote them; no explicit quality control</p></li>
<li><p>R is a sprawling and unstandardized ecosystem</p></li>
</ul>
</section>
<section id="what-are-my-other-options" class="level1">
<h1>What are my other options?</h1>
<ul>
<li>Python</li>
<li>Julia</li>
<li>MATLAB</li>
<li>C/C++</li>
<li>SAS</li>
<li>Stata</li>
</ul>
</section>
<section id="my-hidden-agenda" class="level1">
<h1>My hidden agenda</h1>
<p>In addition to learning some R, this workshop will expose you to a way of thinking about doing your computational work.</p>
<p>The building blocks of scientific computing include:</p>
<ul>
<li>scripting</li>
<li>reproducibility</li>
<li>automating repetitive tasks</li>
<li>version control (note our basic use of Git)</li>
</ul>
</section>
<section id="the-legal-stuff" class="level1">
<h1>The Legal Stuff</h1>
<ul>
<li>Some of this material was originally drawn from <a href="http://jaredknowles.com/r-bootcamp/url">Jared Knowles R bootcamp</a>.</li>
<li>Contributions from Corrine Elliott, Dana Seidel, Kellie Ottoboni, Nima Hejazi, Rochelle Terman, Chris Krogslund, and Jarrod Millman. Thank you!!!</li>
<li>You are free to use, modify and redistribute any of this material with or without attribution, but if you use chunks of material, I’d appreciate a call-out.</li>
</ul>
</section>
<section id="thanks" class="level1">
<h1>Thanks!</h1>
<ul>
<li>To all the presenters and assistants.</li>
<li>To the Statistics Department for sponsorship and logistical support.</li>
<li>To Golden Bears Orientation (GBO) for making the room available to us.</li>
</ul>
</section>
<section id="we-want-your-feedback-even-if-you-leave-early" class="level1">
<h1>We want your feedback (even if you leave early)!</h1>
<p>During the afternoon break tomorrow, we’ll ask everyone to fill out a feedback form, but if you leave early, please follow <a href="https://forms.gle/xh6omJqMYciY3KNP8">this link</a> or see the Ed Discussion board for the link. % R bootcamp, Module 3: Working with objects and data % August 2023, UC Berkeley % Chris Paciorek</p>
</section>
<section id="lists" class="level1">
<h1>Lists</h1>
<p>Collections of disparate or complicated objects</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>myList <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">stuff =</span> <span class="dv">3</span>, <span class="at">mat =</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">nrow =</span> <span class="dv">2</span>), </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>   <span class="at">moreStuff =</span> <span class="fu">c</span>(<span class="st">"china"</span>, <span class="st">"japan"</span>), <span class="fu">list</span>(<span class="dv">5</span>, <span class="st">"bear"</span>))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>myList</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$stuff
[1] 3

$mat
     [,1] [,2]
[1,]    1    3
[2,]    2    4

$moreStuff
[1] "china" "japan"

[[4]]
[[4]][[1]]
[1] 5

[[4]][[2]]
[1] "bear"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>myList[[<span class="dv">3</span>]] <span class="co"># result is not (usually) a list (unless you have nested lists)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "china" "japan"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(myList[[<span class="dv">3</span>]], myList<span class="sc">$</span>moreStuff)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>myList<span class="sc">$</span>moreStuff[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "japan"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>myList[[<span class="dv">4</span>]][[<span class="dv">2</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bear"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>myList[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] <span class="co"># subset of a list is a list</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$stuff
[1] 3

$mat
     [,1] [,2]
[1,]    1    3
[2,]    2    4

$moreStuff
[1] "china" "japan"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>myList<span class="sc">$</span>newOne <span class="ot">&lt;-</span> <span class="st">'more weird stuff'</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(myList)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "stuff"     "mat"       "moreStuff" ""          "newOne"   </code></pre>
</div>
</div>
<p>Lists can be used as vectors of complicated objects. E.g., suppose you have a linear regression for each value of a stratifying variable. You could have a list of regression fits. Each regression fit will itself be a list, so you’ll have a list of lists.</p>
</section>
<section id="lists-quick-quiz" class="level1">
<h1>Lists: quick quiz</h1>
<p><strong><a href="https://www.polleverywhere.com/multiple_choice_polls/n6adK1IU7niikhA2ZgLNi">P</a>OLL 3A</strong>: How would you extract “china” from this list?</p>
<p>(respond at <a href="https://pollev.com/chrispaciorek428">https://pollev.com/chrispaciorek428</a>)</p>
<pre><code>myList &lt;- list(stuff = 3, mat = matrix(1:4, nrow = 2), 
   moreStuff = c("china", "japan"), list(5, "bear"))</code></pre>
<ol type="1">
<li>myList$moreStuff[1]</li>
<li>myList$moreStuff[[1]]</li>
<li>myList[[1]]</li>
<li>myList[[3]][2]</li>
<li>myList[[3]][1]</li>
<li>myList[3][1]</li>
<li>myList[[‘moreStuff’]][1]</li>
</ol>
</section>
<section id="data-frames" class="level1">
<h1>Data frames</h1>
<p>A review from Module 1…</p>
<ul>
<li>Data frames are combinations of vectors of the same length, but can be of different types</li>
<li>Data frames are what is used for standard rectangular (record by field) datasets, similar to a spreadsheet</li>
<li>Data frames are a functionality that both sets R aside from some languages (e.g., MATLAB) and provides functionality similar to some statistical packages (e.g., Stata, SAS)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tbl_df"     "tbl"        "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  country     continent  year lifeExp      pop gdpPercap
  &lt;fct&gt;       &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
1 Afghanistan Asia       1952    28.8  8425333      779.
2 Afghanistan Asia       1957    30.3  9240934      821.
3 Afghanistan Asia       1962    32.0 10267083      853.
4 Afghanistan Asia       1967    34.0 11537966      836.
5 Afghanistan Asia       1972    36.1 13079460      740.
6 Afghanistan Asia       1977    38.4 14880372      786.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [1,704 × 6] (S3: tbl_df/tbl/data.frame)
 $ country  : Factor w/ 142 levels "Afghanistan",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ continent: Factor w/ 5 levels "Africa","Americas",..: 3 3 3 3 3 3 3 3 3 3 ...
 $ year     : int [1:1704] 1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ lifeExp  : num [1:1704] 28.8 30.3 32 34 36.1 ...
 $ pop      : int [1:1704] 8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...
 $ gdpPercap: num [1:1704] 779 821 853 836 740 ...</code></pre>
</div>
</div>
</section>
<section id="data-frames-are-special-lists" class="level1">
<h1>Data frames are (special) lists!</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.list</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>gapminder[[<span class="dv">3</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1952 1957 1962 1967 1972</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(gapminder, class) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$country
[1] "factor"

$continent
[1] "factor"

$year
[1] "integer"

$lifeExp
[1] "numeric"

$pop
[1] "integer"

$gdpPercap
[1] "numeric"</code></pre>
</div>
</div>
<p><code>lapply()</code> is a function used on lists; it works here to apply the <code>class()</code> function to each element of the list, which in this case is each field/column.</p>
</section>
<section id="but-lists-are-also-vectors" class="level1">
<h1>But lists are also vectors!</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>someFields <span class="ot">&lt;-</span> gapminder[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(someFields)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
   year      pop
  &lt;int&gt;    &lt;int&gt;
1  1952  8425333
2  1957  9240934
3  1962 10267083
4  1967 11537966
5  1972 13079460
6  1977 14880372</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(gapminder[<span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)], gapminder[ , <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>In general the placement of commas in R is crucial, but here, two different operations give the same result because of the underlying structure of data frames.</p>
</section>
<section id="matrices" class="level1">
<h1>Matrices</h1>
<p>If you need to do numeric calculations on an entire non-vector object (dimension &gt; 1), you generally want to use matrices and arrays, not data frames.</p>
<ul>
<li>Matrices are two-dimensional collections of values of the same type</li>
<li>We can have numeric, integer, character, or logical matrices, character matrices.</li>
<li>You can’t mix types within a matrix</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">12</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">4</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]      [,2]       [,3]      [,4]
[1,] -0.1742195 0.3069455 -0.1603155 0.1334212
[2,]  0.8692871 0.2758168  0.3247086 0.8292693
[3,]  1.2095432 1.6006515  1.9431709 0.5445643</code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># vectorized calcs work with matrices too</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>mat<span class="sc">*</span><span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]     [,2]       [,3]      [,4]
[1,] -0.696878 1.227782 -0.6412621 0.5336848
[2,]  3.477148 1.103267  1.2988343 3.3170772
[3,]  4.838173 6.402606  7.7726837 2.1782571</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">cbind</span>(mat, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]      [,2]       [,3]      [,4] [,5]
[1,] -0.1742195 0.3069455 -0.1603155 0.1334212    1
[2,]  0.8692871 0.2758168  0.3247086 0.8292693    2
[3,]  1.2095432 1.6006515  1.9431709 0.5445643    3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Let's convert the gapminder dataframe to a matrix:</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>gm_mat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(gapminder[ , <span class="fu">c</span>(<span class="st">'lifeExp'</span>, <span class="st">'gdpPercap'</span>)])</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gm_mat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     lifeExp gdpPercap
[1,]  28.801  779.4453
[2,]  30.332  820.8530
[3,]  31.997  853.1007
[4,]  34.020  836.1971
[5,]  36.088  739.9811
[6,]  38.438  786.1134</code></pre>
</div>
</div>
</section>
<section id="matrices-quick-quiz" class="level1">
<h1>Matrices: quick quiz</h1>
<p><strong><a href="https://www.polleverywhere.com/multiple_choice_polls/1jt7IHbQvXnaqRmUCGOru">P</a>OLL 3B</strong>: Recall the gap dataframe has columns that are numeric and columns that are character strings. What do you think will happen if we do this:</p>
<pre><code>as.matrix(gapminder)</code></pre>
<p>(respond at <a href="https://pollev.com/chrispaciorek428">https://pollev.com/chrispaciorek428</a>)</p>
<ol type="1">
<li>it will convert to a matrix with no changes</li>
<li>all numeric columns will be converted to character strings</li>
<li>R will throw an error</li>
<li>all character columns will be converted to numeric values</li>
<li>R will drop some of the columns</li>
</ol>
</section>
<section id="arrays" class="level1">
<h1>Arrays</h1>
<p>Arrays are like matrices but can have more or fewer than two dimensions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>arr <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="fu">rnorm</span>(<span class="dv">12</span>), <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>))</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>arr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , 1

           [,1]      [,2]      [,3]
[1,] -0.2929488 -1.062181 0.4738981
[2,] -0.3160444  1.066623 1.6608384

, , 2

           [,1]      [,2]       [,3]
[1,] -0.5520635 0.2465999 -0.7640677
[2,] -0.5350803 0.7300581 -0.2565696

, , 3

           [,1]      [,2]      [,3]
[1,] -0.2929488 -1.062181 0.4738981
[2,] -0.3160444  1.066623 1.6608384

, , 4

           [,1]      [,2]       [,3]
[1,] -0.5520635 0.2465999 -0.7640677
[2,] -0.5350803 0.7300581 -0.2565696</code></pre>
</div>
</div>
</section>
<section id="attributes" class="level1">
<h1>Attributes</h1>
<p>Objects have <em>attributes</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(mat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$dim
[1] 3 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'first'</span>, <span class="st">'middle'</span>, <span class="st">'last'</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             [,1]      [,2]       [,3]      [,4] [,5]
first  -0.1742195 0.3069455 -0.1603155 0.1334212    1
middle  0.8692871 0.2758168  0.3247086 0.8292693    2
last    1.2095432 1.6006515  1.9431709 0.5445643    3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(mat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$dim
[1] 3 5

$dimnames
$dimnames[[1]]
[1] "first"  "middle" "last"  

$dimnames[[2]]
NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">attributes</span>(gapminder))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "names"     "class"     "row.names"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(gapminder)<span class="sc">$</span>names</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "country"   "continent" "year"      "lifeExp"   "pop"       "gdpPercap"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(gapminder)<span class="sc">$</span>row.names[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
</div>
</div>
<p>Now let’s do a bit of manipulation and see if you can infer how R represents matrices internally.</p>
</section>
<section id="attributes-quick-quiz" class="level1">
<h1>Attributes: quick quiz</h1>
<p><strong><a href="https://www.polleverywhere.com/multiple_choice_polls/YkHAsxssHtWqCQ9DGMDbo">P</a>OLL 3C</strong>: Consider our matrix ‘mat’:</p>
<p>(respond at <a href="https://pollev.com/chrispaciorek428">https://pollev.com/chrispaciorek428</a>)</p>
<pre><code>mat &lt;- matrix(1:16, nrow = 4, ncol = 4)
     [,1] [,2] [,3] [,4]
[1,]    1    5    9   13
[2,]    2    6   10   14
[3,]    3    7   11   15
[4,]    4    8   12   16</code></pre>
<p>Suppose I run this code: mat[4]</p>
<p>What do you think will be returned?</p>
<ol type="1">
<li>13</li>
<li>4</li>
<li>13, 14, 15, 16</li>
<li>4, 8, 12, 16</li>
<li>an error</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>mat[<span class="dv">4</span>]</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="fu">attributes</span>(mat) <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>mat</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">is.matrix</span>(mat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Question</strong>: What can you infer about what a matrix is in R?</p>
<p><strong>Question</strong>: What kind of object are the attributes themselves? How do I check?</p>
</section>
<section id="matrices-are-stored-column-major" class="level1">
<h1>Matrices are stored column-major</h1>
<p>This is like Fortran, MATLAB and Julia but not like C or Python(numpy).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4]
[1,]    1    4    7   10
[2,]    2    5    8   11
[3,]    3    6    9   12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>vals <span class="ot">&lt;-</span> <span class="fu">c</span>(mat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can go smoothly back and forth between a matrix (or an array) and a vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(mat, <span class="fu">matrix</span>(vals, <span class="dv">3</span>, <span class="dv">4</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">identical</span>(mat, <span class="fu">matrix</span>(vals, <span class="dv">3</span>, <span class="dv">4</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>This is a common cause of bugs!</p>
</section>
<section id="missing-values-and-other-special-values" class="level1">
<h1>Missing values and other special values</h1>
<p>Since it was designed by statisticians, R handles missing values very well relative to other languages.</p>
<section id="na-is-a-missing-value" class="level2">
<h2 class="anchored" data-anchor-id="na-is-a-missing-value"><code>NA</code> is a missing value</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">12</span>)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>vec[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>)] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>vec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] -0.69169184 -1.75954353          NA  0.18627791          NA -0.14336787
 [7]  0.75164139 -1.49712443 -0.28113504 -0.03490703  0.01795629  0.43739368</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(vec, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -3.0145</code></pre>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] FALSE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>Be careful because many R functions won’t warn you that they are ignoring the missing values.</p>
</section>
<section id="to-infinity-and-beyond" class="level2">
<h2 class="anchored" data-anchor-id="to-infinity-and-beyond">To infinity and beyond</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>big <span class="ot">&lt;-</span> <span class="fl">1e500</span> </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>big</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>big <span class="sc">+</span> <span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
</div>
</section>
<section id="nan-stands-for-not-a-number" class="level2">
<h2 class="anchored" data-anchor-id="nan-stands-for-not-a-number"><code>NaN</code> stands for Not a Number</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(-5): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>big <span class="sc">-</span> big</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Inf</code></pre>
</div>
</div>
</section>
<section id="null" class="level2">
<h2 class="anchored" data-anchor-id="null"><code>NULL</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(vec, <span class="cn">NULL</span>) </span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>vec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] -0.69169184 -1.75954353          NA  0.18627791          NA -0.14336787
 [7]  0.75164139 -1.49712443 -0.28113504 -0.03490703  0.01795629  0.43739368</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(vec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 12</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>a <span class="sc">+</span> <span class="dv">7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>numeric(0)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>a[<span class="dv">3</span>, <span class="dv">4</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.null</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>myList <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">7</span>, <span class="at">b =</span> <span class="dv">5</span>)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>myList<span class="sc">$</span>a <span class="ot">&lt;-</span> <span class="cn">NULL</span>  <span class="co"># works for data frames too</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>myList</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$b
[1] 5</code></pre>
</div>
</div>
<p><code>NA</code> can hold a place but <code>NULL</code> cannot. <code>NULL</code> is useful for having a function argument default to ‘nothing’. See <code>help(crossprod)</code>, which can compute either <span class="math inline">\(X^{\top}X\)</span> or <span class="math inline">\(X^{\top}Y\)</span>.</p>
</section>
</section>
<section id="missing-values-quick-quiz" class="level1">
<h1>Missing values: quick quiz</h1>
<p><strong>POLL 3D</strong></p>
<p>(just respond in your head; I won’t collect the answers online)</p>
<p><em>Question 1</em>: Consider the following vector:</p>
<pre><code>vec &lt;- c(3, NA, 7)</code></pre>
<p>What is vec[2]:</p>
<ol type="1">
<li>NA</li>
<li>7</li>
</ol>
<p><em>Question 2</em>: Consider this vector:</p>
<pre><code>vec &lt;- c(3, NULL, 7)</code></pre>
<p>What is vec[2]:</p>
<ol type="1">
<li>NULL</li>
<li>NA</li>
<li>7</li>
<li>3</li>
</ol>
<p><em>Question 3</em>: Consider this list:</p>
<pre><code>mylist &lt;- list(3, NULL, 7)</code></pre>
<p>What is mylist[[2]]:</p>
<ol type="1">
<li>7</li>
<li>NULL</li>
<li>NA</li>
<li>3</li>
</ol>
<p><em>Question 4</em>: Consider this code:</p>
<pre><code>mylist &lt;- list(3, 5, 7)
mylist[[2]] &lt;- NULL</code></pre>
<p>What is length(mylist):</p>
<ol type="1">
<li>3</li>
<li>2</li>
<li>1</li>
</ol>
</section>
<section id="logical-vectors-and-boolean-arithmetic" class="level1">
<h1>Logical vectors and boolean arithmetic</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>gapminder2007 <span class="ot">&lt;-</span> gapminder[gapminder<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2007</span>, ]</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>wealthy <span class="ot">&lt;-</span> gapminder2007<span class="sc">$</span>gdpPercap <span class="sc">&gt;</span> <span class="dv">35000</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>healthy <span class="ot">&lt;-</span> gapminder2007<span class="sc">$</span>lifeExp <span class="sc">&gt;</span> <span class="dv">75</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(wealthy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(wealthy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>wealthy
FALSE  TRUE 
  130    12 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># note the vectorized boolean arithmetic</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>gapminder2007[wealthy <span class="sc">&amp;</span> healthy, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 6
   country          continent  year lifeExp       pop gdpPercap
   &lt;fct&gt;            &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;     &lt;int&gt;     &lt;dbl&gt;
 1 Austria          Europe     2007    79.8   8199783    36126.
 2 Canada           Americas   2007    80.7  33390141    36319.
 3 Denmark          Europe     2007    78.3   5468120    35278.
 4 Hong Kong, China Asia       2007    82.2   6980412    39725.
 5 Iceland          Europe     2007    81.8    301931    36181.
 6 Ireland          Europe     2007    78.9   4109086    40676.
 7 Kuwait           Asia       2007    77.6   2505559    47307.
 8 Netherlands      Europe     2007    79.8  16570613    36798.
 9 Norway           Europe     2007    80.2   4627926    49357.
10 Singapore        Asia       2007    80.0   4553009    47143.
11 Switzerland      Europe     2007    81.7   7554661    37506.
12 United States    Americas   2007    78.2 301139947    42952.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>gapminder2007[wealthy <span class="sc">|</span> healthy, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 44 × 6
   country    continent  year lifeExp      pop gdpPercap
   &lt;fct&gt;      &lt;fct&gt;     &lt;int&gt;   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;
 1 Albania    Europe     2007    76.4  3600523     5937.
 2 Argentina  Americas   2007    75.3 40301927    12779.
 3 Australia  Oceania    2007    81.2 20434176    34435.
 4 Austria    Europe     2007    79.8  8199783    36126.
 5 Bahrain    Asia       2007    75.6   708573    29796.
 6 Belgium    Europe     2007    79.4 10392226    33693.
 7 Canada     Americas   2007    80.7 33390141    36319.
 8 Chile      Americas   2007    78.6 16284741    13172.
 9 Costa Rica Americas   2007    78.8  4133884     9645.
10 Croatia    Europe     2007    75.7  4493312    14619.
# ℹ 34 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>gapminder2007[wealthy <span class="sc">&amp;</span> <span class="sc">!</span>healthy, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 6
# ℹ 6 variables: country &lt;fct&gt;, continent &lt;fct&gt;, year &lt;int&gt;, lifeExp &lt;dbl&gt;,
#   pop &lt;int&gt;, gdpPercap &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># what am I doing here?</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(healthy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 44</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(healthy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.3098592</code></pre>
</div>
</div>
<p><strong>Question</strong>: What do you think R is doing to do arithmetic on logical vectors?</p>
</section>
<section id="converting-between-different-types-of-objects" class="level1">
<h1>Converting between different types of objects</h1>
<p>You can use the <code>as()</code> family of functions.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>ints <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(ints)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8"  "9"  "10"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="st">'3.7'</span>, <span class="st">'4.8'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.7 4.8</code></pre>
</div>
</div>
<p>Be careful: R tries to be helpful and convert between types/classes when it thinks it’s a good idea. Sometimes it is overly optimistic.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>indices <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">2.3</span>)</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a>ints[indices]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>ints[<span class="fl">0.999999999</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>integer(0)</code></pre>
</div>
</div>
</section>
<section id="converting-between-different-types-quick-quiz" class="level1">
<h1>Converting between different types: quick quiz</h1>
<p><strong>POLL 3E</strong>:</p>
<p>(just respond in your head; I won’t collect the answers online)</p>
<p><em>Question 1</em>: What do you think this will do?</p>
<pre><code>ints &lt;- 1:5
ints[0.9999]</code></pre>
<ol type="1">
<li>return an error</li>
<li>return 1</li>
<li>return an empty vector</li>
</ol>
<p><em>Question 2</em>: What does the code do when it tries to use 0.9999 to subset?</p>
<ol type="1">
<li>round the 0.9999 to 1</li>
<li>truncate the 0.9999 to 0</li>
<li>return an error</li>
</ol>
</section>
<section id="factors" class="level1">
<h1>Factors</h1>
<ul>
<li>A factor is a special data type in R used for categorical data. In some cases it works like magic and in others it is incredibly frustrating.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="do">## let's read the Gapminder data from a file with a special argument:</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>gapminder <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.path</span>(<span class="st">'..'</span>, <span class="st">'data'</span>, <span class="st">'gapminder-FiveYearData.csv'</span>),</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">stringsAsFactors =</span> <span class="cn">TRUE</span>) <span class="co"># This was the default before R 4.0</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(gapminder<span class="sc">$</span>continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "factor"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder<span class="sc">$</span>continent) <span class="co"># What order are the factors in?</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Asia Asia Asia Asia Asia Asia
Levels: Africa Americas Asia Europe Oceania</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(gapminder[[<span class="st">"continent"</span>]])  <span class="co"># note alternate way to get the variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Africa"   "Americas" "Asia"     "Europe"   "Oceania" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(gapminder<span class="sc">$</span>continent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Africa Americas     Asia   Europe  Oceania 
     624      300      396      360       24 </code></pre>
</div>
</div>
<ul>
<li>What if we don’t like the order these are in? Factor order is important for all kinds of things like plotting, analysis of variance, regression output, and more</li>
</ul>
</section>
<section id="advanced-ordering-the-factor-optional" class="level1">
<h1>(Advanced) Ordering the Factor (optional)</h1>
<ul>
<li>Ordered factors simply have an additional attribute explaining the order of the levels of a factor</li>
<li>This is a useful shortcut when we want to preserve some of the meaning provided by the order</li>
<li>Think ordinal data</li>
</ul>
<p>This example is a bit artificial as ‘continent’ doesn’t really have a natural ordering.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>gapminder<span class="sc">$</span>continent2 <span class="ot">&lt;-</span> <span class="fu">ordered</span>(gapminder<span class="sc">$</span>continent, </span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">levels =</span> <span class="fu">levels</span>(gapminder<span class="sc">$</span>continent)[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>)])</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder<span class="sc">$</span>continent2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Asia Asia Asia Asia Asia Asia
Levels: Americas &lt; Africa &lt; Asia &lt; Europe &lt; Oceania</code></pre>
</div>
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(gapminder<span class="sc">$</span>continent2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Americas" "Africa"   "Asia"     "Europe"   "Oceania" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(lifeExp <span class="sc">~</span> continent2, <span class="at">data =</span> gapminder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="data_files/figure-html/orderedfac-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="advanced-reclassifying-factors" class="level1">
<h1>(Advanced) Reclassifying Factors</h1>
<ul>
<li>Turning factors into other data types can be tricky. All factors have an underlying numeric structure.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">'basic'</span>,<span class="st">'proficient'</span>,<span class="st">'advanced'</span>,<span class="st">'basic'</span>, </span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>      <span class="st">'advanced'</span>, <span class="st">'minimal'</span>))</span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(students)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "advanced"   "basic"      "minimal"    "proficient"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unclass</span>(students)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 1 2 1 3
attr(,"levels")
[1] "advanced"   "basic"      "minimal"    "proficient"</code></pre>
</div>
</div>
<ul>
<li>Hmmm, what happened?</li>
<li>Be careful! The best way to convert a factor is to convert it to a character first.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>students <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">'basic'</span>,<span class="st">'proficient'</span>,<span class="st">'advanced'</span>,<span class="st">'basic'</span>, </span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>      <span class="st">'advanced'</span>, <span class="st">'minimal'</span>))</span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>score <span class="ot">=</span> <span class="fu">c</span>(<span class="at">minimal =</span> <span class="dv">65</span>, <span class="at">basic =</span> <span class="dv">75</span>, <span class="at">advanced =</span> <span class="dv">95</span>, <span class="at">proficient =</span> <span class="dv">85</span>) <span class="co"># a named vector</span></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>score[<span class="st">"advanced"</span>]  <span class="co"># look up by name</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>advanced 
      95 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>students[<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] advanced
Levels: advanced basic minimal proficient</code></pre>
</div>
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>score[students[<span class="dv">3</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>minimal 
     65 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>score[<span class="fu">as.character</span>(students[<span class="dv">3</span>])]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>advanced 
      95 </code></pre>
</div>
</div>
<p>What went wrong and how did we fix it? Notice how easily this could be a big bug in your code.</p>
</section>
<section id="strings" class="level1">
<h1>Strings</h1>
<p>R has lots of functionality for character strings. Usually these are stored as vectors of strings, each string of arbitrary length.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>chars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'hi'</span>, <span class="st">'hallo'</span>, <span class="st">"mother's"</span>, <span class="st">'father</span><span class="sc">\'</span><span class="st">s'</span>, <span class="st">"He said, </span><span class="sc">\"</span><span class="st">hi</span><span class="sc">\"</span><span class="st">"</span> )</span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(chars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(chars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  5  8  8 13</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"bill"</span>, <span class="st">"clinton"</span>, <span class="at">sep =</span> <span class="st">" "</span>)  <span class="co"># paste together a set of strings</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "bill clinton"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(chars, <span class="at">collapse =</span> <span class="st">' '</span>)  <span class="co"># paste together things from a vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "hi hallo mother's father's He said, \"hi\""</code></pre>
</div>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">strsplit</span>(<span class="st">"This is the R bootcamp"</span>, <span class="at">split =</span> <span class="st">" "</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
[1] "This"     "is"       "the"      "R"        "bootcamp"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="fu">as.character</span>(gapminder2007<span class="sc">$</span>country)</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="fu">substring</span>(countries, <span class="dv">1</span>, <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Afg" "Alb" "Alg" "Ang" "Arg" "Aus" "Aus" "Bah" "Ban" "Bel" "Ben" "Bol"
 [13] "Bos" "Bot" "Bra" "Bul" "Bur" "Bur" "Cam" "Cam" "Can" "Cen" "Cha" "Chi"
 [25] "Chi" "Col" "Com" "Con" "Con" "Cos" "Cot" "Cro" "Cub" "Cze" "Den" "Dji"
 [37] "Dom" "Ecu" "Egy" "El " "Equ" "Eri" "Eth" "Fin" "Fra" "Gab" "Gam" "Ger"
 [49] "Gha" "Gre" "Gua" "Gui" "Gui" "Hai" "Hon" "Hon" "Hun" "Ice" "Ind" "Ind"
 [61] "Ira" "Ira" "Ire" "Isr" "Ita" "Jam" "Jap" "Jor" "Ken" "Kor" "Kor" "Kuw"
 [73] "Leb" "Les" "Lib" "Lib" "Mad" "Mal" "Mal" "Mal" "Mau" "Mau" "Mex" "Mon"
 [85] "Mon" "Mor" "Moz" "Mya" "Nam" "Nep" "Net" "New" "Nic" "Nig" "Nig" "Nor"
 [97] "Oma" "Pak" "Pan" "Par" "Per" "Phi" "Pol" "Por" "Pue" "Reu" "Rom" "Rwa"
[109] "Sao" "Sau" "Sen" "Ser" "Sie" "Sin" "Slo" "Slo" "Som" "Sou" "Spa" "Sri"
[121] "Sud" "Swa" "Swe" "Swi" "Syr" "Tai" "Tan" "Tha" "Tog" "Tri" "Tun" "Tur"
[133] "Uga" "Uni" "Uni" "Uru" "Ven" "Vie" "Wes" "Yem" "Zam" "Zim"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="ot">&lt;-</span> countries</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">substring</span>(tmp, <span class="dv">5</span>, <span class="dv">10</span>) <span class="ot">&lt;-</span> <span class="st">"______"</span></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a>tmp[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Afgh______n"            "Alba___"                "Alge___"               
 [4] "Ango__"                 "Arge_____"              "Aust_____"             
 [7] "Aust___"                "Bahr___"                "Bang______"            
[10] "Belg___"                "Beni_"                  "Boli___"               
[13] "Bosn______ Herzegovina" "Bots____"               "Braz__"                
[16] "Bulg____"               "Burk______so"           "Buru___"               
[19] "Camb____"               "Came____"              </code></pre>
</div>
</div>
<p>We can search for patterns in character vectors and replace patterns (both vectorized!)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>indexes <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">"Korea"</span>, countries)</span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>indexes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 70 71</code></pre>
</div>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>countries[indexes]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Korea, Dem. Rep." "Korea, Rep."     </code></pre>
</div>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a>countries2 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"Korea, Dem. Rep."</span>, <span class="st">"North Korea"</span>, countries)</span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a>countries2[indexes]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "North Korea" "Korea, Rep."</code></pre>
</div>
</div>
</section>
<section id="regular-expressions-regex-or-regexp-optional" class="level1">
<h1>Regular expressions (regex or regexp) (optional)</h1>
<p>Some of you may be familiar with using <em>regular expressions</em>, which is functionality for doing sophisticated pattern matching and replacement with strings. <em>Python</em> and <em>Perl</em> are both used extensively for such text manipulation.</p>
<p>R has a full set of regular expression capabilities available through the <em>grep()</em>, <em>gregexpr()</em>, and <em>gsub()</em> functions (among others - many R functions will work with regular expressions). However, a particularly nice way to make use of this functionality is to use the <em>stringr</em> package, which is more user-friendly than directly using the core R functions.</p>
<p>You can basically do any regular expression/string manipulations in R.</p>
</section>
<section id="subsetting" class="level1">
<h1>Subsetting</h1>
<p>There are many ways to select subsets in R. The syntax below is useful for vectors, matrices, data frames, arrays and lists.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> gapminder2007<span class="sc">$</span>lifeExp</span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(mat) <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [,1] [,2] [,3] [,4] [,5]
a    1    5    9   13   17
b    2    6   10   14   18
c    3    7   11   15   19
d    4    8   12   16   20</code></pre>
</div>
</div>
<section id="by-direct-indexing" class="level2">
<h2 class="anchored" data-anchor-id="by-direct-indexing">1) by direct indexing</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">12</span><span class="sc">:</span><span class="dv">14</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 72.301 75.320 65.554 74.852 50.728</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>vec[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">5</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 43.828 76.423 42.731 81.235 79.829 75.635 64.062 79.441 56.728 65.554
 [11] 74.852 50.728 72.390 73.005 52.295 49.580 59.723 50.430 80.653 44.741
 [21] 50.651 78.553 72.961 72.889 65.152 46.462 55.322 78.782 48.328 75.748
 [31] 78.273 76.486 78.332 54.791 72.235 74.994 71.338 71.878 51.579 58.040
 [41] 52.947 79.313 80.657 56.735 59.448 79.406 60.022 79.483 70.259 56.007
 [51] 46.388 60.916 70.198 82.208 73.338 81.757 64.698 70.650 70.964 59.545
 [61] 78.885 80.745 80.546 72.567 82.603 72.535 54.110 67.297 78.623 77.588
 [71] 71.993 42.592 45.678 73.952 59.443 48.303 74.241 54.467 64.164 72.801
 [81] 76.195 66.803 74.543 71.164 42.082 62.069 52.906 63.785 79.762 80.204
 [91] 72.899 56.867 46.859 80.196 75.640 65.483 75.537 71.752 71.421 71.688
[101] 75.563 78.098 78.746 76.442 72.476 46.242 65.528 72.777 63.062 74.002
[111] 42.568 79.972 74.663 77.926 48.159 49.339 80.941 72.396 58.556 39.613
[121] 80.884 81.701 74.143 78.400 52.517 70.616 58.420 69.819 73.923 71.777
[131] 51.542 79.425 78.242 76.384 73.747 74.249 73.422 62.698 42.384 43.487</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>gapminder[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>), <span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30.332 34.020</code></pre>
</div>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>gapminder[<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>), <span class="st">'lifeExp'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30.332 34.020</code></pre>
</div>
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Advanced: subset using a 2-column matrix of indices:</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>rowInd <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>colInd <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>elemInd <span class="ot">&lt;-</span> <span class="fu">cbind</span>(rowInd, colInd)</span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>elemInd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     rowInd colInd
[1,]      1      2
[2,]      3      2
[3,]      4      1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>gapminder[elemInd]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1952"        "1962"        "Afghanistan"</code></pre>
</div>
</div>
</section>
<section id="by-a-vector-of-logicals" class="level2">
<h2 class="anchored" data-anchor-id="by-a-vector-of-logicals">2) by a vector of logicals</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>wealthy <span class="ot">&lt;-</span> gapminder<span class="sc">$</span>gdpPercap <span class="sc">&gt;</span> <span class="dv">50000</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a>gapminder<span class="sc">$</span>gdpPercap[wealthy]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 108382.35 113523.13  95458.11  80894.88 109347.87  59265.48</code></pre>
</div>
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>gapminder[wealthy, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    country year     pop continent lifeExp gdpPercap continent2
853  Kuwait 1952  160000      Asia  55.565 108382.35       Asia
854  Kuwait 1957  212846      Asia  58.033 113523.13       Asia
855  Kuwait 1962  358266      Asia  60.470  95458.11       Asia
856  Kuwait 1967  575003      Asia  64.624  80894.88       Asia
857  Kuwait 1972  841934      Asia  67.712 109347.87       Asia
858  Kuwait 1977 1140357      Asia  69.343  59265.48       Asia</code></pre>
</div>
</div>
<p>What happened in the last subsetting operation?</p>
</section>
<section id="by-a-vector-of-names" class="level2">
<h2 class="anchored" data-anchor-id="by-a-vector-of-names">3) by a vector of names</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>mat[<span class="fu">c</span>(<span class="st">'a'</span>, <span class="st">'d'</span>, <span class="st">'a'</span>), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [,1] [,2] [,3] [,4] [,5]
a    1    5    9   13   17
d    4    8   12   16   20
a    1    5    9   13   17</code></pre>
</div>
</div>
</section>
<section id="using-subset" class="level2">
<h2 class="anchored" data-anchor-id="using-subset">4) using <em>subset()</em></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(gapminder, gdpPercap <span class="sc">&gt;</span> <span class="dv">50000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    country year     pop continent lifeExp gdpPercap continent2
853  Kuwait 1952  160000      Asia  55.565 108382.35       Asia
854  Kuwait 1957  212846      Asia  58.033 113523.13       Asia
855  Kuwait 1962  358266      Asia  60.470  95458.11       Asia
856  Kuwait 1967  575003      Asia  64.624  80894.88       Asia
857  Kuwait 1972  841934      Asia  67.712 109347.87       Asia
858  Kuwait 1977 1140357      Asia  69.343  59265.48       Asia</code></pre>
</div>
</div>
</section>
<section id="using-dplyr-tools-such-as-filter-and-select-more-in-module-6" class="level2">
<h2 class="anchored" data-anchor-id="using-dplyr-tools-such-as-filter-and-select-more-in-module-6">5) using <em>dplyr</em> tools such as <em>filter()</em> and <em>select()</em> – more in Module 6</h2>
</section>
</section>
<section id="assignment-into-subsets" class="level1">
<h1>Assignment into subsets</h1>
<p>We can assign into subsets by using similar syntax, as we saw with vectors.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">20</span>)</span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>vec[<span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">12</span><span class="sc">:</span><span class="dv">14</span>)] <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>vec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1.781601132 -1.536105748  1.000000000 -2.584592105  2.000000000
 [6]  0.139840140 -0.159449640  0.029895477  0.300732426 -0.016802000
[11] -0.037096454  3.000000000  4.000000000  5.000000000 -1.824759170
[16] -0.005015851 -0.731639804  1.559005402 -0.443255728  0.179237254</code></pre>
</div>
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">6</span><span class="sc">*</span><span class="dv">5</span>), <span class="at">nrow =</span> <span class="dv">6</span>)</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>mat[<span class="dv">2</span>, <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">3</span>)</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]       [,2]       [,3]       [,4]        [,5]
[1,] -1.3853952  1.1891917  0.1215616  0.9832439  1.12446404
[2,]  1.3920173  1.1902243 -0.6533425  0.5688975  0.33956062
[3,]  0.1549973 -1.5971333 -1.0085192 -0.7616862 -0.05231482
[4,] -0.1644869 -1.0940655  1.0856398 -2.1544534  0.20423996
[5,]  0.4968151  0.5473536 -0.0400088  0.2896016  0.07760786
[6,] -0.3604728 -0.3894277  1.7925883 -0.3717866 -0.40426462</code></pre>
</div>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>mat[mat[,<span class="dv">1</span>] <span class="sc">&gt;</span> <span class="dv">0</span>, ] <span class="ot">&lt;-</span> <span class="sc">-</span><span class="cn">Inf</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           [,1]       [,2]      [,3]       [,4]       [,5]
[1,] -1.3853952  1.1891917 0.1215616  0.9832439  1.1244640
[2,]       -Inf       -Inf      -Inf       -Inf       -Inf
[3,]       -Inf       -Inf      -Inf       -Inf       -Inf
[4,] -0.1644869 -1.0940655 1.0856398 -2.1544534  0.2042400
[5,]       -Inf       -Inf      -Inf       -Inf       -Inf
[6,] -0.3604728 -0.3894277 1.7925883 -0.3717866 -0.4042646</code></pre>
</div>
</div>
</section>
<section id="subsetting-quick-quiz" class="level1">
<h1>Subsetting: quick quiz</h1>
<p><strong><a href="https://www.polleverywhere.com/multiple_choice_polls/fFm9QlOQDGRz0pJZklyV2">P</a>OLL 3F</strong>: Suppose I want to select the 3rd elements from the 2nd and 4th columns of a matrix or dataframe. Which syntax will work?</p>
<p>(respond at <a href="https://pollev.com/chrispaciorek428">https://pollev.com/chrispaciorek428</a>)</p>
<p>Here’s a test matrix:</p>
<pre><code>mat &lt;- matrix(1:16, nrow = 4, ncol = 4)</code></pre>
<ol type="1">
<li>mat[3, (2, 4)]</li>
<li>mat[c(FALSE, FALSE, TRUE, FALSE), c(FALSE, TRUE, FALSE, TRUE)]</li>
<li>mat[c(FALSE, FALSE, TRUE, FALSE), c(2, 4)]</li>
<li>mat[3, c(2, 4)]</li>
<li>mat(3, c(2, 4))</li>
<li>mat[3, ][c(2, 4)]</li>
<li>mat[ , c(2, 4)][3, ]</li>
<li>mat[ , c(2, 4)][3]</li>
<li>mat[c(2, 4)][3, ]</li>
</ol>
<p><strong>POLL 3F</strong>: (Advanced) One of those answers won’t work with a matrix but will work with a dataframe. Which one?</p>
<ol type="1">
<li>mat[3, (2, 4)]</li>
<li>mat[c(FALSE, FALSE, TRUE, FALSE), c(FALSE, TRUE, FALSE, TRUE)]</li>
<li>mat[c(FALSE, FALSE, TRUE, FALSE), c(2, 4)]</li>
<li>mat[3, c(2, 4)]</li>
<li>mat(3, c(2, 4))</li>
<li>mat[3, ][c(2, 4)]</li>
<li>mat[ , c(2, 4)][3, ]</li>
<li>mat[ , c(2, 4)][3]</li>
<li>mat[c(2, 4)][3, ]</li>
</ol>
</section>
<section id="breakout" class="level1">
<h1>Breakout</h1>
<section id="basics" class="level3">
<h3 class="anchored" data-anchor-id="basics">Basics</h3>
<ol type="1">
<li><p>Extract the 5th row from the gapminder dataset.</p></li>
<li><p>Extract the last row from the gapminder dataset.</p></li>
<li><p>Count the number of gdpPercap values greater than 50000 in the gapminder dataset.</p></li>
<li><p>Set all of the gdpPercap values greater than 50000 to NA. You should probably first copy the <code>gapminder</code> object and work on the copy so that the dataset is unchanged, so that you preserve the original data to use later.</p></li>
<li><p>Consider the first row of the gapminder dataset, which has Afghanistan for 1952. How do I create a string “Afghanistan-1952” using <code>gap$country[1]</code> and <code>gap$year[1]</code>?</p></li>
</ol>
</section>
<section id="using-the-ideas" class="level3">
<h3 class="anchored" data-anchor-id="using-the-ideas">Using the ideas</h3>
<ol start="6" type="1">
<li><p>Create a character string using <code>paste()</code> that tells the user how many rows there are in the data frame - do this programmatically such that it would work for any data frame regardless of how many rows it has. The result should look like this: “There are 1704 rows in the dataset”</p></li>
<li><p>If you didn’t do it this way already in problem #2, extract the last row from the gapminder dataset without typing the number ‘1704’.</p></li>
<li><p>Create a boolean vector indicating if the life expectancy is greater than 75 and the gdpPercap is less than 10000 and calculate the proportion of all the records these represent.</p></li>
<li><p>Use that vector to create a new data frame that is a subset of the original data frame.</p></li>
<li><p>Consider the attributes of the gapminder dataset. What kind of R object is the set of attributes?</p></li>
</ol>
</section>
<section id="advanced" class="level3">
<h3 class="anchored" data-anchor-id="advanced">Advanced</h3>
<ol start="11" type="1">
<li>Create row names for the data frame based on concatenating the Continent, Country, and Year fields.</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/paciorek\.github\.io\/r-voleon-2025");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>